{% extends 'cm_portal/index.html' %}

{% block title %}| Geriatric Section{% endblock %}

{% load static %}

{% block navbar %}
  {% include 'includes/nav_geria.html' %}
{% endblock %}

{% block sidebar %}    
    {% if user.is_authenticated %}
      {% include 'includes/user.html' %}
    {% endif %}    
    {% include 'includes/geria_sidebar.html' %}
{% endblock %}

{% block page_title %}| Geriatric Section{% endblock %}
  
{% block content %}   	
  {% if user.is_authenticated %}
    <div class="jumbotron">
      <h2>Welcome to the 
        <em>Geriatrics Database</em>, where you can store resident profiles and other related information.
      </h2>
      <div class="row">
	      <div class="col-sm-4">
		      <div class="card">
			      <a href="{% url 'resident-create' %}" style="text-decoration: none;">
				      <div class="card-body">
					      <h4 class="card-title"><i class="fas fa-id-card"></i> New Resident</h4>
					      <h6 class="card-subtitle mb-2 text-muted">Add New Resident</h6>        
				      </div>
			      </a>
		      </div>	      	      
	      </div>
			<div class="col-sm-4">
				<div class="card">
					<a href="{% url 'drug-create' %}" style="text-decoration: none;">
						<div class="card-body">
							<h4 class="card-title"><i class="fas fa-capsules"></i> New Drug</h4>
							<h6 class="card-subtitle mb-2 text-muted">Add New Drug</h6>
						</div>
					</a>
				</div>
			</div>			
		</div>
		<div class="row">
		   <div class="col-sm-4">
				<div class="card">
					<a href="{% url 'physician-create' %}" style="text-decoration: none;">
						<div class="card-body">
							<h4 class="card-title"><i class="fas fa-user-md"></i> New Physician</h4>
							<h6 class="card-subtitle mb-2 text-muted">Add New Physician</h6>
						</div>
					</a>
				</div>
			</div>						
			<div class="col-sm-4">
				<div class="card">
					<a href="{% url 'building-create' %}" style="text-decoration: none;">
						<div class="card-body">
							<h4 class="card-title"><i class="fas fa-building"></i> New Building</h4>
							<h6 class="card-subtitle mb-2 text-muted">Add New Building</h6>
						</div>
					</a>
				</div>
			</div>
		</div>
		<br>
		<h4>Directory</h4>
		<ul class="list-group list-group-flush">        
        <a href="{% url 'residents' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
          <strong>Residents</strong>
          <span class="badge badge-primary badge-pill">{{ resident_list.count }}</span> 
        </a>
        <a href="{% url 'relatives' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
          <strong>Relatives</strong>
          <span class="badge badge-primary badge-pill">{{ relative_list.count }}</span>
        </a>
        <a href="{% url 'physicians' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
          <strong>Physicians</strong>
          <span class="badge badge-primary badge-pill">{{ physician_list.count }}</span> 
        </a>    
        <a href="{% url 'drugs' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
          <strong>Drugs</strong>
          <span class="badge badge-primary badge-pill">{{ drug_list.count }}</span> 
        </a>             
        <a href="{% url 'buildings' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
          <strong>Buildings</strong>
          <span class="badge badge-primary badge-pill">{{ building_list.count }}</span> 
        </a>
      </ul>
      <br>
      {% if building_list %}      
      <h4>Census By Building</h4>
        <ul class="list-group list-group-flush">
          {% for building in building_list %}
          <a href="{{ building.get_absolute_url }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">          
            <strong>{{ building }}</strong>                           
            <span class="badge badge-primary badge-pill">{{ building.resident_set.count }}</span>
          </a>
          {% endfor %}
        </ul>      
      {% endif %}
    </div>
  {% else %}
    <p>Please <a href="{% url 'login'%}?next={{request.path}}">login</a></p>
  {% endif %}  
{% endblock %}