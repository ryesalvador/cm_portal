{% for meds in resident.medication_set.all %}
    <tr>
      {% if forloop.first %}
        <td rowspan="{{ meds.resident.medication_set.count }}">{{ meds.resident }}<br>{{ meds.resident.osca_id }}</td>
        <td>{{ meds.medicine.generic_name }}</td>
        <td>{{ meds.medicine.dosage }}</td>
        <td>{{ meds.frequency }}</td>
        <td>{% if meds.quantity %}{{ meds.quantity }}{% endif %}</td>    
        <td>{% if meds.due %}{{ meds.due }}{% endif %}</td>
        <td>{% if meds.medicine.price %}{{ meds.medicine.price }}{% endif %}</td>
      {% else %}
        <td>{{ meds.medicine.generic_name }} 
        {% if meds.medicine.brand_name %}({{ meds.medicine.brand_name }}){% endif %}</td>
        <td>{{ meds.medicine.dosage }}</td>
        <td>{{ meds.frequency }}</td>
        <td>{% if meds.quantity %}{{ meds.quantity }}{% endif %}</td>    
        <td>{% if meds.due %}{{ meds.due }}{% endif %}</td>
        <td>{% if meds.medicine.price %}{{ meds.medicine.price }}{% endif %}</td>
      {% endif %}
    </tr>
 {% endfor %}